{% extends "schedules/base.html" %}


{% load i18n %}
{% load static %}
{% load avatar_tags %}
{% load utility_tags %}
{% load tz %}

{% block extra_head %}
	{% get_current_language as LANGUAGE_CODE %}
	{% get_current_timezone as TIME_ZONE %}
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.min.css">
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.min.js'></script>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/locales-all.min.js'></script>
    <script type="text/javascript">
    /* Document Event Listener */
    document.addEventListener('DOMContentLoaded', function() {
        var language_code = '{{LANGUAGE_CODE}}';
        var calendar_element = document.getElementById('calender');
        var now_date_ts = new Date({{datef.ts_dict.year}}, {{datef.ts_dict.month}}, {{datef.ts_dict.day}}, {{datef.ts_dict.hour}}, {{datef.ts_dict.minute}}, {{datef.ts_dict.second}});
        
        var now_date = now_date_ts.getDate();
        var now_month = now_date_ts.getMonth();
        var now_year = now_date_ts.getFullYear();
        
        
        /* Initial Calendar Object */
        var calendar = new FullCalendar.Calendar(
        	calendar_element, 
        	{
				locale: language_code,
              	header: {
                  left: "title",
                  right: "prev,next today agendaWeek, agendaDay, listWeek"

              	},
              	editable: true,
              	height: 'auto',
              	now: '{{ datef.ts_string }}', 
              	timeZone: '{{ TIME_ZONE }}',
              	nowIndicator: true,
              	firstDay: 7, // first days from monday,
              	allDaySlot:false,
              	slotMinTime:"08:00:00",
              	slotMaxTime:"21:00:00",
              	initialView: 'timeGridWeek',
              	selectable: true,
          		buttonIcons: false, // show the prev/next text
                initialDate: "{{ datef.date|date:'Y-m-d' }}",
              
              	defaultView: "{% if 'search_availability/' in request.META.PATH_INFO %}agendaDay{% else %}agendaWeek{% endif %}",

	            headerToolbar: {
	                    left: 'prev,next today',
	                    center: 'title',
	                    right: 'timeGridWeek,timeGridDay',
		
	              },
	            
	            /* IF select */
              	select: function(info) {
              		// ----
              	},
              	/* end IF select */
              	
              	/* IF click */
              	eventClick: function(e) {
                	//--
              	},
              	/* end IF click */
              	
              	/* IF resize */
              	eventResize: function(e) {
              		//--
              	},
              	/* end IF resize */
              	
              	/* IF event Drop */
              	eventDrop: function(info) {
              		//--
                },
                /* end IF event Drop */
                
                /* IF event Allow */
                eventAllow: function(dropInfo, draggedEvent) {
                	//--
                
              	},
              	/* end IF event Allow */
              	
              	/* IF events */
              	events: [
              	//--
              		{% for no, object in object_list %}
              			{
              				id: "{{ object.id }}",
              				title: "{{ object.group }}",
              				start:"{{ object.calendar_start_time_string }}",
                      		end:"{{ object.calendar_end_time_string }}",
                      		color:'green'
              			}{% if not forloop.last %},{% endif %}
              		{% endfor %}
              	]
              	/* end IF events */
        });

        calendar.render();
        
    })
    
    </script>
{% endblock extra_head %}

   
{% block title_filter %}{% endblock title_filter %}

{% block breadcrumb %}
	
{% endblock breadcrumb %}

{% block page_title %}
	
{% endblock page_title %}

{% block add_new_button %}{% endblock add_new_button %}

{% block content %}
	<div class="row">
		{% for no, object in object_list %}
  			{{no}} <br>
  		{% endfor %}
         <div class="col-sm-12">
             <div class="card">
                <section class="col-sm-12" id="calender-room-wrapper">
                	<div id="calender"></div>
                </section>
             </div>
         </div>
     </div>
{% endblock content %}

{% block extra_jquery %}{% endblock extra_jquery %}

{% block js_plugin %} {% endblock js_plugin %}

{% block extra_js %}
	<!-- <script>
	function doDate()
		{
		    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
		    var str = "";
		    var now = new Date({{datef.ts_dict.year}}, {{datef.ts_dict.month}}, {{datef.ts_dict.day}}, {{datef.ts_dict.hour}}, {{datef.ts_dict.minute}}, {{datef.ts_dict.second}});
		    str = now.toLocaleDateString('{{LANGUAGE_CODE}}', options) +' '+now.toLocaleTimeString('{{LANGUAGE_CODE}}', {hour12: false}) ;
		    document.getElementById("biostar_room_ts").innerHTML = str;
		}
	
	setInterval(doDate, 1000);
	
	</script> -->
{% endblock %}







